(this["webpackJsonpfront-gauss-control"]=this["webpackJsonpfront-gauss-control"]||[]).push([[0],{166:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(6),c=a.n(s),r=a(10),i=a(29),l=a(26),o=a(67),d=a(17),j="ffd-carga-inicial",u="ffd-obtener-summary",b="ffd-obtener-ranking",m="ffd-filtros-busqueda",f="response-cargando",x="response-ok",O={operations:[],validDates:{},detailSummary:{},detailRanking:[],search:{operation:"",start:"",end:""}},v={loading:!1,ok:!1},h=Object(l.b)({ffd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{operations:t.payload.operations,validDates:t.payload.validDates,search:{operation:"",start:t.payload.validDates.minDate,end:t.payload.validDates.maxDate}});case u:return Object(d.a)(Object(d.a)({},e),{},{detailSummary:t.payload});case b:return Object(d.a)(Object(d.a)({},e),{},{detailRanking:t.payload});case m:return Object(d.a)(Object(d.a)({},e),{},{search:t.payload});default:return e}},response:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{loading:!0,ok:!1};case x:return{loading:!1,ok:!0};default:return e}}}),p="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,g=Object(l.d)(h,p(Object(l.a)(o.a))),N=a(21),_=a.n(N),y=a(38),w=a(68),D=a.n(w).a.create({baseURL:"https://pg.gausscontrol.com:8020/ffd"}),k=function(e){var t=e.operation,a=e.start,n=e.end,s={};return""!==t&&(s.operation=t),""!==a&&(s.start=a),""!==n&&(s.end=n),D.get("/detail/summary",{params:s})},S=function(e){var t=e.operation,a=e.start,n=e.end,s={};return""!==t&&(s.operation=t),""!==a&&(s.start=a),""!==n&&(s.end=n),D.get("/detail/ranking",{params:s})},F=a(69),R=a.n(F),E=function(e){var t=e.title,a=e.text;R.a.fire({title:t,text:a,icon:"error"})},T=function(e){return{type:j,payload:e}},C=function(e){return function(){var t=Object(y.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(e);case 3:n=t.sent,a(L(n.data.response)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),E({title:"Error",text:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return{type:u,payload:e}},Y=function(e){return function(){var t=Object(y.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e);case 3:n=t.sent,a(I(n.data.response)),a({type:x}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),E({title:"Error",text:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return{type:b,payload:e}},M=a.p+"static/media/logo-gauss-control.3b32a48b.png",P=a(3),z=function(){return Object(P.jsxs)("div",{className:"d-none d-md-block menu__container",children:[Object(P.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(P.jsx)("img",{src:M,alt:"logo",className:"menu__logo"})}),Object(P.jsxs)("div",{className:"mt-4",children:[Object(P.jsxs)("div",{className:"menu__item menu__item-bg-active",children:[Object(P.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"far fa-thumbs-up fa-lg me-3"}),Object(P.jsx)("span",{className:"text__active",children:"Fitness for duty"})]}),Object(P.jsx)("i",{className:"fas fa-caret-right mt-1"})]}),Object(P.jsx)("div",{className:"menu__sub-item",children:"Resumen"}),Object(P.jsx)("div",{className:"menu__sub-item text__active",children:"Detalle"}),Object(P.jsx)("div",{className:"menu__sub-item",children:"Personas"}),Object(P.jsx)("div",{className:"menu__sub-item",children:"Resultados"})]}),Object(P.jsxs)("div",{className:"d-flex justify-content-between align-items-center menu__item",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-cog fa-lg me-3"}),Object(P.jsx)("span",{children:"Gesti\xf3n de datos"})]}),Object(P.jsx)("i",{className:"fas fa-caret-right mt-1"})]})]})]})},q=a(54),J=a(52),U=a.n(J),V=(a(119),a(72)),X=a(22),A=a.n(X),B=function(e){var t=e.title,a=e.appearance,s=Object(i.useToasts)().addToast;return Object(n.useEffect)((function(){s(t,{appearance:a,autoDismissTimeout:2500,autoDismiss:!0})}),[s,t,a]),Object(P.jsx)(P.Fragment,{})};Object(J.registerLocale)("es",V.a);var G=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.ffd})),a=t.operations,s=t.validDates,c=t.search,i=Object(r.c)((function(e){return e.response})).ok,l=Object(n.useState)([null,null]),o=Object(q.a)(l,2),d=o[0],j=o[1],u=Object(q.a)(d,2),b=u[0],x=u[1];Object(n.useEffect)((function(){e(C(c)),e(Y(c)),j([A()(s.minDate).toDate(),A()(s.maxDate).toDate()])}),[e,c,s.minDate,s.maxDate]);var O=function(t){e({type:f}),e({type:m,payload:t}),e(C(t)),e(Y(t))};return Object(P.jsxs)("div",{className:"d-flex justify-content-between align-items-center navbar__container",children:[Object(P.jsx)("div",{className:"d-flex",children:Object(P.jsxs)("div",{className:"row g-3",children:[Object(P.jsxs)("div",{className:"col-12 col-sm-6",children:[Object(P.jsx)("label",{htmlFor:"selOperations",className:"form-label",children:"Operaci\xf3n"}),Object(P.jsxs)("select",{id:"selOperations",name:"operation",className:"form-select",value:c.operation,onChange:function(e){var t=e.target;c[t.name]=t.value,O(c)},children:[Object(P.jsx)("option",{value:"",children:"Todos"}),a.map((function(e,t){return Object(P.jsx)("option",{value:e,children:e},"operation-".concat(t))}))]})]}),Object(P.jsxs)("div",{className:"col-12 col-sm-6",children:[Object(P.jsx)("label",{htmlFor:"txtRange",className:"form-label",children:"Fecha"}),Object(P.jsx)(U.a,{id:"txtRange",selectsRange:!0,startDate:b,endDate:x,minDate:A()(s.minDate).toDate(),maxDate:A()(s.maxDate).toDate(),locale:"es",onChange:function(e){j(e),function(e){if(e[0]&&e[1]){var t=A()(e[0]).format("YYYY-MM-DD"),a=A()(e[1]).format("YYYY-MM-DD");c.start=t,c.end=a,O(c)}}(e)},dateFormat:"dd/MM",className:"form-control"})]})]})}),Object(P.jsx)("div",{children:Object(P.jsx)("i",{className:"fas fa-user fa-lg"})}),i&&Object(P.jsx)(B,{title:"Vista actualizada",appearance:"success"})]})},H=a(53),K=(a(165),function(){var e=Object(r.c)((function(e){return e.ffd})).detailRanking,t=void 0===e?[]:e,a={good:{rgba:"rgba(0, 219, 166, 1)",hex:"#06c394"},fair:{rgba:"rgba(246, 185, 27, 1)",hex:"#dfa616"},bad:{rgba:"rgba(240, 94, 109, 1)",hex:"#f05e6d"}};return Object(P.jsx)("div",{children:Object(P.jsxs)("div",{className:"table__container",children:[Object(P.jsx)("div",{className:"fw-bold text-center mb-4",children:"Ranking de personas"}),Object(P.jsx)("div",{className:t.length>2?"table__overflow":"",children:Object(P.jsxs)("table",{className:"table",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{className:"head__width-ranking",children:"N\xb0 Ranking"}),Object(P.jsx)("th",{children:"Nombre persona"}),Object(P.jsx)("th",{className:"head__width-tasa",children:"Tasa de rechazos FFD"})]})}),Object(P.jsx)("tbody",{children:t.map((function(e,t){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{className:"row__ranking",align:"center",valign:"middle",children:Object(P.jsx)("div",{className:"row__ranking-text",children:e.ranking})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:"fw-bold",children:e.name}),Object(P.jsxs)("div",{children:["Transportista: ",e.carrier]}),Object(P.jsxs)("div",{children:["Operaci\xf3n: ",e.operation]}),Object(P.jsxs)("div",{children:["Planta: ",e.plant]})]}),Object(P.jsx)("div",{children:Object(P.jsx)("i",{className:"fas fa-eye fa-lg row__icon"})})]})}),Object(P.jsx)("td",{align:"center",valign:"middle",children:Object(P.jsx)("div",{className:"rate__wrapper",children:Object(P.jsx)(H.a,{value:e.rejectedIndicator.rate,text:"".concat(e.rejectedIndicator.rate,"%"),styles:Object(H.b)({textSize:"1.5rem",pathColor:"".concat(a[e.rejectedIndicator.status.toLowerCase()].rgba),textColor:"".concat(a[e.rejectedIndicator.status.toLowerCase()].hex)})})})})]},"ranking-".concat(t))}))})]})})]})})}),Q=function(e){var t,a=e.detailSummary.distribution,n=0,s=[];return a&&(t=a,(s=JSON.parse(JSON.stringify(t))).map((function(e){return n+=e.quantity})),s.map((function(e){return e.state=e.state.toLowerCase(),e.percentage=0===n?0:Math.round(e.quantity/n*100),e}))),Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:"progress bar__wrapper",children:s.map((function(e){return Object(P.jsx)("div",{className:"progress-bar ".concat(e.state),role:"progressbar",style:{width:"".concat(e.percentage,"%")},"aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},"progress-".concat(e.state))}))}),Object(P.jsx)("div",{className:"mt-2",children:"Distribuci\xf3n resultados de FFD del per\xedodo"})]})},W=function(e){var t=e.detailSummary,a=t.rejectedIndicator,n=t.evolution,s=(null===a||void 0===a?void 0:a.status.toLowerCase())||"",c="".concat(null===a||void 0===a?void 0:a.status.toLowerCase(),"__border")||!1,r=(null===n||void 0===n?void 0:n.meaning.toLowerCase())||"",i="";if(null===n||void 0===n?void 0:n.trend)switch(null===n||void 0===n?void 0:n.trend.toLowerCase()){case"increase":i="fa-arrow-up";break;case"decrease":i="fa-arrow-down";break;case"same":i="fa-arrows-alt-h"}return Object(P.jsxs)("div",{children:[Object(P.jsxs)("span",{className:"arrow__evolution ".concat(r,"__text"),children:[Object(P.jsx)("i",{className:"fas ".concat(i)})," ",null===n||void 0===n?void 0:n.difference,"%"]}),Object(P.jsxs)("div",{className:"d-flex flex-column align-items-center me-4 circle__container",children:[Object(P.jsx)("div",{className:"d-flex justify-content-center align-items-center circle__wrapper ".concat(s," ").concat(c),children:Object(P.jsxs)("span",{children:[null===a||void 0===a?void 0:a.rate,"%"]})}),Object(P.jsx)("div",{className:"mt-2",children:"Tasa de rechazo FFD del per\xedodo"})]})]})},Z=function(){var e=Object(r.c)((function(e){return e.ffd})).detailSummary;return Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:"row mb-4",children:[Object(P.jsx)("div",{className:"col-12 col-sm-6 col-lg-4 col-xl-3",children:Object(P.jsx)("div",{className:"me-4",children:Object(P.jsx)(W,{detailSummary:e})})}),Object(P.jsx)("div",{className:"col-12 col-sm-6 col-lg-8 col-xl-9 d-flex flex-column justify-content-end",children:Object(P.jsx)("div",{className:"mt-4 bar__container",children:Object(P.jsx)(Q,{detailSummary:e})})})]}),Object(P.jsxs)("div",{className:"mb-4",children:[Object(P.jsx)("div",{className:"main__text-help",children:"* Rechazo: Se refiere a la(s) ocasion(es) en que uno o varios individuos fueron evaluados como NO APTOS para trabajar a trav\xe9s del c\xe1lculo de FITNESS FOR DUTY."}),Object(P.jsx)("hr",{className:"m-0"})]})]})},$=function(){var e=Object(r.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(y.a)(_.a.mark((function e(t){var a,n,s,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=D.get("/operations"),n=D.get("/validDates"),e.next=5,Promise.all([a,n]);case 5:s=e.sent,c={operations:s[0].data.response.operations,validDates:s[1].data.response},t(T(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E({title:"Error",text:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(P.jsxs)("div",{className:"d-flex",children:[Object(P.jsx)(z,{}),Object(P.jsxs)("div",{className:"flex-fill d-flex flex-column",children:[Object(P.jsx)(G,{}),Object(P.jsxs)("div",{className:"flex-fill main__container",children:[Object(P.jsx)(Z,{}),Object(P.jsx)(K,{})]})]})]})},ee=function(){return Object(P.jsx)(r.a,{store:g,children:Object(P.jsx)(i.ToastProvider,{children:Object(P.jsx)($,{})})})};a(166);c.a.render(Object(P.jsx)(ee,{}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.f06cc96a.chunk.js.map